- name: build and run the docker container
  hosts: localhost
  tasks:
    - name: Install pip
      apt: name=python-pip state=present

    - name: install docker-py
      pip: name=docker-py

    - name: Build Docker image from Dockerfile
      docker_image:
        name: hello-node
        build:
          path: .
        source: build

    - name: Creating the container
      docker_container:
        name: hello-node-dev
        image: hello-node:latest
        state: present

    - name: Running the container
      docker_container:
        name: hello-node-dev
        published_ports:
          - "3004:3000"
        image: hello-node:latest
        state: started
